<!doctype html>
    <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
    <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
    <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
    <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->

    
      
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Documentation: Data Storage - </title>
        <meta name="author" content="idb">
        
        <meta name="description" content="Documentation: Data Storage Main Setup Data Storage Binary Analysis IPC Tools Data Storage The first tab of idb&rsquo;s interface provides an easy &hellip;">
        
        <meta name="viewport" content="width=device-width">
        <link rel="canonical" href="http://www.idbtool.com/documentation/data_storage.html">

        <link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,400italic' rel='stylesheet' type='text/css'>
        <link href="http://fonts.googleapis.com/css?family=Droid+Sans" rel="stylesheet" type="text/css">


        
        <link href="/favicon.png" rel="icon">
        <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
        <link href="/atom.xml" rel="alternate" title="" type="application/atom+xml">
    </head>


    <body >

        <header id="header">
    <a href="https://github.com/dmayer/idb"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/c6625ac1f3ee0a12250227cf83ce904423abf351/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_gray_6d6d6d.png"></a>

<div class="row">
    <div class="col-xs-12 col-sm-8 col-md-4">
        <a href="/" class="site-title"></a>
    </div>
    <div class="col-xs-12 col-sm-4 col-md-8">
        <nav>
    <input type="checkbox" id="toggle">
    <label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
    <ul class="menu">
    <li><a href="/">Home</a></li>
    <li><a href="/blog/">Blog</a></li>
    <li><a href="/features/">Features</a></li>
    <li><a href="/installation/">Installation</a></li>
    <li><a href="/documentation/">Documentation</a></li>
    <li><a href="/faq/">FAQ</a></li>
</ul>

</nav>

    </div>
</div>



</header>


        <div id="main-content">

            <!--[if lte IE 9]>
<div class="row upgrade-row">
    <div class="col-lg-12">
        <div class="upgrade">
            <i class="upgrade__icon fa fa-warning"></i>
            <h1 class="upgrade__title h6">Ohnoes!</h1>
            <p class="upgrade__text">
                Unfortunately, certain parts of this site may not display correctly in your version of Internet Explorer!<br>
                If possible, you should consider <a href="http://browsehappy.com/">upgrading your browser</a>.
            </p>
        </div>
    </div>
</div>
<!-- <![endif]-->


            

            <div class="row top-xs center-sm center-md center-lg site-wrapper">
                
                <div class="col-xs-12 col-sm-10 col-md-10 col-lg-10">
                
                    <article class="page">

    
    <header>
        <h1 class="page__title">
            Documentation: Data Storage
        </h1>
    </header>
    <hr class="divider">
    

    <div style="width:100%; position: relative; top:-30px;"><ul class="doc_menu">
    <li><a href="/documentation/">Main</a></li>
    <li><a href="/documentation/setup.html">Setup</a></li>
    <li><a href="/documentation/data_storage.html">Data Storage</a></li>
    <li><a href="/documentation/app_analysis.html">Binary Analysis</a></li>
    <li><a href="/documentation/ipc.html">IPC</a></li>
    <li><a href="/documentation/tools.html">Tools</a></li>
</ul>
</div>


<hr class="divider" style="position: relative; top:-30px;">


<h2>Data Storage</h2>

<p>The first tab of idb&rsquo;s interface provides an easy way to analyze data stored in common file types. At the moment,
this includes plist files, SQLite databases, and HTTP request caches (<code>Cache.db</code>). The functionality provided by idb
for each of the file types is similar: You can automatically search the entire app directory for the specific file
type, list the results including their <code>DataProtection</code> class (encryption!), and view the files by simply
double-clicking a result entry. Click the &ldquo;Refresh&rdquo; button at the bottom to retrieve the list.</p>

<p>For iOS 8+, Each storage related tab displays the &ldquo;Default Data Protection&rdquo; of the app which is set via app entitlements.
This class defines the default protection class used for files created by the app.  In order to determine the
 <code>DataProtection</code> class for each file, <code>idb</code> uses a small helper utility which is available at:
  <a href="https://github.com/dmayer/protectionclassviewer">https://github.com/dmayer/protectionclassviewer</a></p>

<h3>plist Files</h3>

<p>Plist files are used  by most iOS application for structured data storage. Typically they are accessed via iOS&rsquo;s
<code>NSUserDefaults</code> which automatically  persists the data on the file system in the form of <code>.plist</code> files (XML or binary).</p>

<p><img src="/images/doc/idb_plist_files.png" alt="Listing Plist Files" /></p>

<h3>SQLite Databases</h3>

<p>SQLite support has been part of the iOS SDK since early on. SQLite databases are stored on the file system
 (generally unencrypted) and can be queried using a limited set of SQL.</p>

<p><img src="/images/doc/idb_sqlite_files.png" alt="Listing SQLite Files" /></p>

<h3>Cache.db Files</h3>

<p>The automatic request and response caching performed by <code>NSURLConnection</code> can disclose sensitive data on the file
system. Specifically, it stores request and response data in a <code>Cache.db</code> file, an unencrypted sqlite database.</p>

<p><img src="/images/doc/idb_cachedb_files.png" alt="Listing Cache.db Files" /></p>

<h2>File System Browser</h2>

<p>The file system browser provides an easy to use interface for browsing the app&rsquo;s sandbox. All directories and files
are listed in a familiar tree and list structure. The details pane at the bottom displays file permissions and the
<code>DataProtection</code> class which applies to the file. This way one can easily verify that sensitive files are properly
protected. Moreover, double-clicking on any file will automatically download and open it on the idb host with the
application that is associated with the file extension. At the bottom of this tab is a section for displaying the
&ldquo;Default Data Protection&rdquo; of the app, the default encryption class of files created by this app.</p>

<p><img src="/images/doc/idb_fs_browser.png" width="800" alt="File System Browser" /></p>

<h3>Git + Rsync</h3>

<p>In order to get a full mirror of the current application sandbox (and the data directory on iOS 8+), the Git+Rsync
function can be used. It uses rsync to create an exact mirror of the remote file system on the idb host. In addition,
the entire directory structure is checked into a dedicated git repository. When performing subsequent syncs using
Git+Rsync, new revisions are created in the git repo and thus changes in the application directory can be tracked. The
directory where the git repository is held can easily be changed in the user interface. This can, e.g.,  be used to
compare or keep track of installations on different devices.</p>

<ul>
<li>Git+Rsync: Performs a sync and checks a new revision into git.</li>
<li>Open Folder: Opens the local mirror with the most recent revision checked out.</li>
<li>Open gitk: Opens gitk to explore the git repo.</li>
</ul>


<p><img src="/images/doc/idb_fs_browser_open.png" width="800" alt="Open Sync Folder" /></p>

<p><img src="/images/doc/idb_fs_browser_gitk.png" width="800" alt="Open gitk" /></p>

<h2>iOS Keychain</h2>

<p>idb provides a convenient way for dumping, editing, and deleting the content of the iOS Keychain.
Below is an overview screenshot of the keychain tab followed by a more detailed description of the different
keychain features.</p>

<p><img src="/images/doc/idb_keychain.png" width="800" alt="Keychain" /></p>

<h3>Dump the Keychain</h3>

<p>Dumping the keychain works by simply clicking the &ldquo;Dump Keychain&rdquo; button in idb. The returned data includes
Entitlement Groups, Account, Service, Protection class, User Presence requirement, create and modification date.
User presence is a new feature in iOS
which requires a user to authenticate either via TouchID or by entering their passcode in order to access a keychain
item. Note that there is no known way for bypassing this check since data is in fact encrypted
 under the passcode and this processing happens in hardware through the Secure Enclave.</p>

<p><img src="/images/doc/idb_keychain_dump.png" width="800" alt="dump of the keychain" /></p>

<h3>View Keychain Entries</h3>

<p>When selecting an entry in the table shown above, the data can be viewed as text, hexdump, or parsed as XML in
the case of binary plist data.</p>

<h4>Text View</h4>

<p><img src="/images/doc/idb_keychain_text.png" width="800" alt="Dump of the keychain" /></p>

<h4>Hexdump View</h4>

<p><img src="/images/doc/idb_keychain_hex.png" width="800" alt="Dump of the keychain" /></p>

<h4>Parsed Binary Plist View</h4>

<p>There is a decent number of applications that store binary plist data inside the keychain and it can be rather
  painful to read it in its string presentation. This screen attempts to detect if a keychain item consists of
  a binary plist, converts it to a regular (xml) plist, and displays the data.</p>

<p><img src="/images/doc/idb_keychain_plist.png" width="800" alt="Dump of the keychain" /></p>

<h3>Deletion</h3>

<p>Deleting a keychain item as simple as it sounds: simply select the entry and click the &ldquo;Delete&rdquo; button.</p>

<p><img src="/images/doc/idb_keychain_delete.png" width="800" alt="Delete keychain item" /></p>

<h3>Editing</h3>

<p>For editing keychain items idb goes with a simple yet flexible approach. After selecting a keychain item,
one can display its content either as plain text, or as Base64 encoded data. The plain text version
allows quick editing of text-based keychain entries while the Base64 version can be used to edit binary
data. Implementing a proper binary/hex editor inside of idb did not seem like a reasonable effort. Instead, by
providing the
data in Base64 format any external editor can be used to modify the data. After editing, simply paste
the new Base64 data into idb and hit save.</p>

<p><img src="/images/doc/idb_keychain_edit.png" width="800" alt="Edit keychain item" />
<img src="/images/doc/idb_keychain_edit_text.png" width="400" alt="Edit keychain item" />
<img src="/images/doc/idb_keychain_edit_base64.png" width="400" alt="Edit keychain item" /></p>


</article>

                </div>

                
            </div>
        </div>

        

    
    




<footer class="footer">
    <div class="row middle-xs">
        
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <p class="footer__copyright">
</p>

        </div>
        
        
    </div>
</footer>

        

<script type="text/javascript">
      var disqus_shortname = 'idbtool';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.idbtool.com/documentation/data_storage.html';
        var disqus_url = 'http://www.idbtool.com/documentation/data_storage.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<!-- Piwik -->
<script type="text/javascript">
    var _paq = _paq || [];
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
        var u="//stats.cysec.org/";
        _paq.push(['setTrackerUrl', u+'piwik.php']);
        _paq.push(['setSiteId', 3]);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
    })();
</script>
<noscript><p><img src="//stats.cysec.org/piwik.php?idsite=3" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->




        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="//crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/md5.js"></script>
<script defer src="/javascripts/octopress.js"></script>




<script>
    var disqus_shortname = 'idbtool';
    
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.idbtool.com/documentation/data_storage.html';
        var disqus_url = 'http://www.idbtool.com/documentation/data_storage.html';
        var disqus_script = 'embed.js';
    
    (function () {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





    </body>

</html>
